// import {recipes} from '../js/recepts.js';
const recipes = [
    { 
        id: 1, 
        name: 'Спагетти Болоньезе', 
        category: 'main', 
        image: '../images/spaghetti.jpg', 
        description: 'Классическое итальянское блюдо с насыщенным мясным соусом.', 
        ingredients: [
            '200г спагетти', 
            '100г фарша говяжьего', 
            '1 луковица, нарезанная', 
            '2 зубчика чеснока, измельченные', 
            '400г консервированных помидоров', 
            '2 ст. л. оливкового масла', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 'Приготовьте спагетти согласно инструкции на упаковке.',
                        'Нагрейте масло на сковороде, добавьте лук и чеснок, обжарьте до золотистого цвета',
                        'Добавьте фарш и готовьте до коричневого цвета.',
                        'Добавьте помидоры, соль и перец. Тушите 20 минут.',
                        'Подавайте соус с спагетти.'
                    ]
    },
    { 
        id: 2, 
        name: 'Салат Цезарь', 
        category: 'salad', 
        image: '../images/caesar_salad.jpg', 
        description: 'Свежие листья романо с заправкой Цезарь и крутонами.', 
        ingredients: [
            '1 кочан салата романо', 
            '50г сухариков', 
            '50г тертого пармезана', 
            'Заправка Цезарь'
        ], 
        instructions: [
            'Нарежьте салат романо и положите в большую миску.', 
            'Добавьте сухарики и тертый пармезан.',
            'Полейте заправкой Цезарь и перемешайте.'
        ]
    },
    { 
        id: 3, 
        name: 'Шоколадный Торт', 
        category: 'dessert', 
        image: '../images/chocolate_cake.jpg', 
        description: 'Вкусный и насыщенный шоколадный торт с кремовой глазурью.', 
        ingredients: [
            '200г муки', 
            '200г сахара', 
            '100г какао-порошка', 
            '1 ч. л. разрыхлителя', 
            '1 ч. л. соды', 
            '2 яйца', 
            '240мл молока', 
            '120мл растительного масла', 
            '2 ч. л. ванильного экстракта'
        ], 
        instructions: [ 'Разогрейте духовку до 175°C.',
                        'В большой миске смешайте сухие ингредиенты.',
                        'Добавьте яйца, молоко, масло и ваниль; взбивайте до однородности.',
                        'Вылейте тесто в смазанную форму для выпечки.',
                        'Выпекайте 30-35 минут.',
                        'Дайте остыть и украсьте по желанию.'
                    ]
    },
    { 
        id: 4, 
        name: 'Гриль-сэндвич с сыром', 
        category: 'main', 
        image: '../images/grilled_cheese.jpg', 
        description: 'Хрустящий сэндвич с расплавленным сыром.', 
        ingredients: [
            '2 ломтика хлеба', 
            '2 ломтика сыра', 
            'Масло'
        ], 
        instructions: [ 'Намажьте масло на одну сторону каждого ломтика хлеба.',
                        'Положите сыр между ломтиками хлеба, намазанными сторонами наружу.',
                        'Разогрейте сковороду на среднем огне.',
                        'Жарьте сэндвич до золотистого цвета с обеих сторон.'
                    ]
    },
    { 
        id: 5, 
        name: 'Брускетта', 
        category: 'appetizer', 
        image: '../images/bruschetta.jpg', 
        description: 'Поджаренный хлеб с томатами и базиликом.', 
        ingredients: [
            '4 ломтика хлеба', 
            '2 помидора, нарезанных', 
            '2 зубчика чеснока, измельченные', 
            'Листья базилика', 
            'Оливковое масло', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 'Поджарьте ломтики хлеба.',
                        'Смешайте помидоры, чеснок, базилик, оливковое масло, соль и перец в миске.',
                        'Положите томатную смесь на каждый ломтик хлеба.'
                    ]
    },
    { 
        id: 6, 
        name: 'Лимонный Торт', 
        category: 'dessert', 
        image: '../images/lemon_tart.jpg', 
        description: 'Кислый лимонный тарт с маслянистой корочкой.', 
        ingredients: [
            '200г муки', 
            '100г масла', 
            '50г сахара', 
            '2 лимона, сок', 
            '200мл сгущенного молока'
        ],
        instructions: [ 'Разогрейте духовку до 180°C.',
                        'мешайте муку, масло и сахар, чтобы получить тесто.',
                        'Выложите тесто в форму для тартов и выпекайте 15 минут.',
                        'Смешайте лимонный сок и сгущенное молоко.',
                        'Вылейте смесь на испеченную корочку и охладите до застывания.'
                    ]
    }, 
    { 
        id: 7, 
        name: 'Цыпленок в духовке', 
        category: 'main', 
        image: '../images/roast_chicken.jpg', 
        description: 'Сочный цыпленок, запеченный с травами и чесноком.', 
        ingredients: [
            '1 целый цыпленок', 
            '3 зубчика чеснока', 
            '50 г сливочного масла', 
            'Соль и перец по вкусу', 
            'Свежие травы (тимьян, розмарин)'
        ], 
        instructions: [ 
            'Разогрейте духовку до 200°C.',
            'Натрите цыпленка солью, перцем и измельченным чесноком.',
            'Поместите травы внутрь цыпленка.',
            'Запекайте цыпленка 1,5 часа, периодически поливая его соком.'
        ]
    },
    { 
        id: 8, 
        name: 'Греческий салат', 
        category: 'salad', 
        image: '../images/greek_salad.jpg', 
        description: 'Свежий салат с огурцами, помидорами, оливками и сыром фета.', 
        ingredients: [
            '2 огурца', 
            '3 помидора', 
            '1 красный лук', 
            '200 г сыра фета', 
            'Оливки', 
            'Оливковое масло', 
            'Соль и орегано по вкусу'
        ], 
        instructions: [ 
            'Нарежьте огурцы, помидоры и лук.',
            'Добавьте нарезанный кубиками сыр фета и оливки.',
            'Полейте оливковым маслом, посыпьте солью и орегано.',
            'Аккуратно перемешайте салат.'
        ]
    },
    { 
        id: 9, 
        name: 'Фахитас', 
        category: 'main', 
        image: '../images/fajitas.jpg', 
        description: 'Мексиканское блюдо с жареным мясом, перцем и луком в тортилье.', 
        ingredients: [
            '500 г говядины или курицы', 
            '1 красный перец', 
            '1 зеленый перец', 
            '1 луковица', 
            'Тортильи', 
            'Специи (чили, кумин)', 
            'Оливковое масло'
        ], 
        instructions: [ 
            'Нарежьте мясо тонкими полосками и обжарьте на сильном огне.',
            'Добавьте нарезанный перец и лук, готовьте до мягкости.',
            'Добавьте специи и перемешайте.',
            'Подавайте с тортильями.'
        ]
    },
    { 
        id: 10, 
        name: 'Тирамису', 
        category: 'dessert', 
        image: '../images/tiramisu.jpg', 
        description: 'Итальянский десерт с маскарпоне и кофе.', 
        ingredients: [
            '250 г сыра маскарпоне', 
            '2 яйца', 
            '100 г сахара', 
            '200 мл крепкого кофе', 
            '200 г савоярди', 
            'Какао-порошок для посыпки'
        ], 
        instructions: [ 
            'Взбейте желтки с сахаром до белой массы, добавьте маскарпоне.',
            'Отдельно взбейте белки до твердых пиков и аккуратно введите в массу.',
            'Окуните савоярди в кофе и выложите в форму.',
            'Сверху выложите крем и повторите слои.',
            'Охладите тирамису в холодильнике минимум 4 часа.',
            'Перед подачей посыпьте какао-порошком.'
        ]
    },
    { 
        id: 11,
        name: 'Пицца Маргарита', 
        category: 'main', 
        image: '../images/margherita_pizza.jpg', 
        description: 'Классическая итальянская пицца с томатами, моцареллой и базиликом.', 
        ingredients: [
            'Тесто для пиццы', 
            '200 г томатного соуса', 
            '250 г моцареллы', 
            'Свежий базилик', 
            'Оливковое масло', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 
            'Разогрейте духовку до 250°C.',
            'Раскатайте тесто и выложите на противень.',
            'Нанесите томатный соус, выложите кусочки моцареллы и базилик.',
            'Полейте оливковым маслом, посыпьте солью и перцем.',
            'Выпекайте пиццу 10-15 минут до золотистого цвета.'
        ]
    },
    { 
        id: 12, 
        name: 'Курица Терияки', 
        category: 'main', 
        image: '../images/teriyaki_chicken.jpg', 
        description: 'Курица в сладком соусе терияки с рисом.', 
        ingredients: [
            '500 г куриного филе', 
            '100 мл соуса терияки', 
            '2 ст. л. соевого соуса', 
            '1 ст. л. меда', 
            'Рис для подачи', 
            'Зеленый лук для украшения'
        ], 
        instructions: [ 
            'Нарежьте курицу полосками и обжарьте до готовности.',
            'Смешайте соус терияки, соевый соус и мед.',
            'Добавьте соус к курице и готовьте еще 5 минут.',
            'Подавайте с рисом и посыпьте зеленым луком.'
        ]
    },
    { 
        id: 13, 
        name: 'Шакшука', 
        category: 'main', 
        image: '../images/shakshuka.jpg', 
        description: 'Традиционное блюдо из яиц, тушеных в томатном соусе с овощами.', 
        ingredients: [
            '4 яйца', 
            '1 луковица', 
            '1 красный перец', 
            '400 г консервированных помидоров', 
            '2 зубчика чеснока', 
            'Специи (паприка, кумин)', 
            'Оливковое масло'
        ], 
        instructions: [ 
            'Нарежьте лук и перец, обжарьте до мягкости.',
            'Добавьте измельченный чеснок и специи, готовьте еще минуту.',
            'Добавьте помидоры и тушите 10 минут.',
            'Сделайте углубления и вбейте яйца.',
            'Накройте крышкой и готовьте до желаемой степени готовности яиц.'
        ]
    },
    { 
        id: 14, 
        name: 'Табуле', 
        category: 'salad', 
        image: '../images/tabbouleh.jpg', 
        description: 'Свежий ливанский салат с булгуром, петрушкой и помидорами.', 
        ingredients: [
            '200 г булгура', 
            '1 пучок петрушки', 
            '2 помидора', 
            '1 огурец', 
            '1 луковица', 
            'Лимонный сок', 
            'Оливковое масло', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 
            'Приготовьте булгур согласно инструкции на упаковке.',
            'Мелко нарежьте петрушку, помидоры, огурец и лук.',
            'Смешайте все ингредиенты, добавьте лимонный сок и оливковое масло.',
            'Посолите и поперчите по вкусу, перемешайте.'
        ]
    },
    { 
        id: 15, 
        name: 'Куриный суп с лапшой', 
        category: 'main', 
        image: '../images/chicken_noodle_soup.jpg', 
        description: 'Традиционный куриный суп с домашней лапшой.', 
        ingredients: [
            '500 г куриного филе', 
            '1 луковица', 
            '2 моркови', 
            '2 стебля сельдерея', 
            '150 г лапши', 
            '2 л куриного бульона', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 
            'Нарежьте куриное филе кубиками и обжарьте до готовности.',
            'Нарежьте овощи и добавьте к курице, обжарьте до мягкости.',
            'Добавьте куриный бульон и доведите до кипения.',
            'Добавьте лапшу и варите до готовности.',
            'Посолите и поперчите по вкусу.'
        ]
    },
    { 
        id: 16, 
        name: 'Суши', 
        category: 'main', 
        image: '../images/sushi.jpg', 
        description: 'Японское блюдо из риса с рыбой и овощами.', 
        ingredients: [
            '500 г риса для суши', 
            '100 мл рисового уксуса', 
            '1 ст. л. сахара', 
            '1 ч. л. соли', 
            'Нори', 
            'Сырая рыба (лосось, тунец)', 
            'Овощи (огурец, авокадо)'
        ], 
        instructions: [ 
            'Приготовьте рис для суши согласно инструкции на упаковке.',
            'Смешайте рисовый уксус, сахар и соль, добавьте к рису.',
            'Выложите нори на бамбуковый коврик, равномерно распределите рис.',
            'Добавьте рыбу и овощи, сверните ролл и нарежьте.'
        ]
    },
    { 
        id: 17, 
        name: 'Омлет с грибами', 
        category: 'main', 
        image: '../images/mushroom_omelette.jpg', 
        description: 'Пышный омлет с обжаренными грибами.', 
        ingredients: [
            '4 яйца', 
            '100 г грибов', 
            '50 мл молока', 
            'Соль и перец по вкусу', 
            'Масло для жарки'
        ], 
        instructions: [ 
            'Нарежьте грибы и обжарьте до золотистого цвета.',
            'Взбейте яйца с молоком, солью и перцем.',
            'Вылейте яичную смесь на сковороду с грибами.',
            'Готовьте омлет до готовности, периодически поднимая края.'
        ]
    },
    { 
        id: 18, 
        name: 'Паста Карбонара', 
        category: 'main', 
        image: '../images/carbonara.jpg', 
        description: 'Итальянская паста с беконом и сливочным соусом.', 
        ingredients: [
            '200 г спагетти', 
            '100 г бекона', 
            '2 яйца', 
            '50 г пармезана', 
            'Соль и перец по вкусу', 
            'Чеснок'
        ], 
        instructions: [ 
            'Приготовьте спагетти согласно инструкции на упаковке.',
            'Обжарьте бекон с измельченным чесноком до хрустящего состояния.',
            'Взбейте яйца с тертым пармезаном, солью и перцем.',
            'Смешайте спагетти с беконом, затем добавьте яичную смесь.',
            'Быстро перемешайте и подавайте.'
        ]
    },
    { 
        id: 19, 
        name: 'Чизкейк', 
        category: 'dessert', 
        image: '../images/cheesecake.jpg', 
        description: 'Кремовый чизкейк на основе печенья.', 
        ingredients: [
            '200 г печенья', 
            '100 г сливочного масла', 
            '500 г сыра крем-чиз', 
            '200 г сахара', 
            '200 мл сливок', 
            '3 яйца', 
            'Ванильный экстракт'
        ], 
        instructions: [ 
            'Измельчите печенье и смешайте с растопленным маслом.',
            'Выложите массу в форму и утрамбуйте.',
            'Взбейте крем-чиз с сахаром, добавьте сливки, яйца и ваниль.',
            'Вылейте массу на основу из печенья.',
            'Выпекайте при 160°C около 1 часа.',
            'Охладите и подавайте.'
        ]
    },
    { 
        id: 20, 
        name: 'Борщ', 
        category: 'main', 
        image: '../images/borscht.jpg', 
        description: 'Традиционный украинский суп из свеклы и капусты.', 
        ingredients: [
            '500 г свеклы', 
            '300 г капусты', 
            '2 картофелины', 
            '1 морковь', 
            '1 луковица', 
            '2 л говяжьего бульона', 
            'Сметана для подачи'
        ], 
        instructions: [ 
            'Очистите и нарежьте овощи.',
            'Обжарьте лук и морковь до мягкости.',
            'Добавьте свеклу и тушите 10 минут.',
            'Добавьте бульон, капусту и картофель.',

'Варите до готовности овощей.',
            'Подавайте со сметаной.'
        ]
    },
    { 
        id: 21, 
        name: 'Плов', 
        category: 'main', 
        image: '../images/pilaf.jpg', 
        description: 'Среднеазиатское блюдо из риса, мяса и овощей.', 
        ingredients: [
            '500 г баранины или говядины', 
            '500 г риса', 
            '2 моркови', 
            '1 луковица', 
            '4 зубчика чеснока', 
            'Специи (зира, барбарис)', 
            'Оливковое масло'
        ], 
        instructions: [ 
            'Нарежьте мясо кубиками и обжарьте до золотистого цвета.',
            'Добавьте нарезанные морковь и лук, тушите до мягкости.',
            'Добавьте специи и чеснок.',
            'Добавьте промытый рис и залейте водой.',
            'Накройте крышкой и готовьте до готовности риса.'
        ]
    },
    { 
        id: 22, 
        name: 'Жареный рис с овощами', 
        category: 'main', 
        image: '../images/fried_rice.jpg', 
        description: 'Рис, обжаренный с овощами и соевым соусом.', 
        ingredients: [
            '500 г вареного риса', 
            '2 моркови', 
            '1 красный перец', 
            '1 зеленый перец', 
            '2 яйца', 
            'Соевый соус', 
            'Оливковое масло'
        ], 
        instructions: [ 
            'Нарежьте овощи и обжарьте до мягкости.',
            'Добавьте вареный рис и перемешайте.',
            'Вбейте яйца и готовьте до готовности.',
            'Добавьте соевый соус по вкусу.'
        ]
    },
    { 
        id: 23, 
        name: 'Куриный карри', 
        category: 'main', 
        image: '../images/chicken_curry.jpg', 
        description: 'Куриное мясо в пряном карри соусе.', 
        ingredients: [
            '500 г куриного филе', 
            '1 луковица', 
            '2 зубчика чеснока', 
            '1 банка кокосового молока', 
            '2 ст. л. карри пасты', 
            'Оливковое масло'
        ], 
        instructions: [ 
            'Нарежьте курицу кубиками и обжарьте до готовности.',
            'Добавьте нарезанный лук и чеснок, тушите до мягкости.',
            'Добавьте карри пасту и перемешайте.',
            'Влейте кокосовое молоко и тушите 20 минут.'
        ]
    },
    { 
        id: 24, 
        name: 'Блины', 
        category: 'dessert', 
        image: '../images/pancakes.jpg', 
        description: 'Тонкие русские блины с начинкой.', 
        ingredients: [
            '500 мл молока', 
            '200 г муки', 
            '2 яйца', 
            '1 ст. л. сахара', 
            'Щепотка соли', 
            'Масло для жарки'
        ], 
        instructions: [ 
            'Смешайте молоко, яйца, сахар и соль.',
            'Постепенно добавьте муку, замешивая тесто.',
            'Разогрейте сковороду и смажьте маслом.',
            'Выпекайте блины с обеих сторон до золотистого цвета.'
        ]
    },
    { 
        id: 25, 
        name: 'Салат Оливье', 
        category: 'salad', 
        image: '../images/olivier.jpg', 
        description: 'Традиционный русский салат с вареными овощами и майонезом.', 
        ingredients: [
            '4 картофелины', 
            '3 моркови', 
            '200 г колбасы', 
            '4 яйца', 
            '1 банка горошка', 
            'Майонез', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 
            'Отварите картофель, морковь и яйца.',
            'Нарежьте все ингредиенты кубиками.',
            'Смешайте с горошком и майонезом.',
            'Посолите и поперчите по вкусу, перемешайте.'
        ]
    },
    { 
        id: 26, 
        name: 'Щи', 
        category: 'main', 
        image: '../images/cabbage_soup.jpg', 
        description: 'Традиционный русский суп из капусты.',

ingredients: [
            '500 г капусты', 
            '2 картофелины', 
            '1 морковь', 
            '1 луковица', 
            '2 л бульона', 
            'Сметана для подачи', 
            'Соль и перец по вкусу'
        ], 
        instructions: [ 
            'Нарежьте овощи и обжарьте лук с морковью.',
            'Добавьте картофель и капусту, залейте бульоном.',
            'Варите до готовности овощей.',
            'Посолите и поперчите по вкусу.',
            'Подавайте со сметаной.'
        ]
    }
];

const recipeContainer = document.getElementById('recipes');
const searchInput = document.getElementById('search');
const ingredientSearchInput = document.getElementById('ingredientSearch');
const categoryLinks = document.querySelectorAll('nav ul li a');
const modal = document.getElementById('recipeModal');
const modalTitle = document.getElementById('modalTitle');
const modalImage = document.getElementById('modalImage');
const modalDescription = document.getElementById('modalDescription');
const modalIngredients = document.getElementById('modalIngredients');
const modalInstructions = document.getElementById('modalInstructions');
const closeModal = document.querySelector('.close');

function displayRecipes(filteredRecipes) {
    recipeContainer.innerHTML = '';
    filteredRecipes.forEach(recipe => {
        const recipeCard = document.createElement('div');
        recipeCard.className = 'recipe-card';
        recipeCard.innerHTML = 
            `<img src="${recipe.image}" alt="${recipe.name}"> <h3>${recipe.name}</h3><p>${recipe.description}</p>`;
        recipeCard.addEventListener('click', () => openModal(recipe));
        recipeContainer.appendChild(recipeCard);
    });
}

function filterRecipes() {
    const searchTerm = searchInput.value.toLowerCase();
    const ingredientSearchTerm = ingredientSearchInput.value.toLowerCase();
    const selectedCategory = document.querySelector('nav ul li a.active')?.getAttribute('data-category') || 'all';
    const filteredRecipes = recipes.filter(recipe => {
        const matchesSearchTerm = recipe.name.toLowerCase().includes(searchTerm);
        const matchesIngredientSearchTerm = recipe.ingredients.some(ingredient => ingredient.toLowerCase().includes(ingredientSearchTerm))
        const matchesCategory = selectedCategory === 'all' || recipe.category === selectedCategory;
        return matchesSearchTerm && matchesIngredientSearchTerm && matchesCategory;
    });
    displayRecipes(filteredRecipes);
}

function openModal(recipe) {
    modalTitle.innerText = recipe.name;
    modalImage.src = recipe.image;
    modalDescription.innerText = recipe.description;
    modalIngredients.innerHTML = recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('');
    modalInstructions.innerHTML = recipe.instructions.map(instruction => `<li>${instruction}</li>`).join('');
    modal.style.display = 'block';
}

function closeModalHandler() {
    modal.style.display = 'none';
}

searchInput.addEventListener('input', filterRecipes);
ingredientSearchInput.addEventListener('input', filterRecipes);

categoryLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        categoryLinks.forEach(link => link.classList.remove('active'));
        link.classList.add('active');
        filterRecipes();
    });
});

closeModal.addEventListener('click', closeModalHandler);

window.addEventListener('click', (e) => {
    if (e.target == modal) {
        closeModalHandler();
    }
});

// Initial display
displayRecipes(recipes);